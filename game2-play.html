<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÁúãemojiÁåúÊàêËØ≠</title>
    <style>
        /* ========== ÂÖ®Â±ÄÊ†∑Âºè ========== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', 'PingFang SC', sans-serif;
            min-height: 100vh;
            background: linear-gradient(135deg, #8E0E00 0%, #1F1C18 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 30px 40px;
        }

        /* ========== È°∂ÈÉ®Áä∂ÊÄÅÊ†è ========== */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            max-width: 1200px;
            margin-bottom: 40px;
            padding: 20px 40px;
            background: linear-gradient(145deg, rgba(211, 47, 47, 0.9), rgba(183, 28, 28, 0.9));
            border-radius: 20px;
            border: 2px solid #FFD700;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }

        .game-name {
            font-size: 36px;
            font-weight: bold;
            color: #FFD700;
        }

        .question-info {
            font-size: 28px;
            color: #FFF;
        }

        /* ========== Ê∏∏ÊàèÂå∫Âüü ========== */
        .game-area {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1;
            width: 100%;
            max-width: 1000px;
        }

        /* ========== EmojiÊòæÁ§∫Âå∫Âüü ========== */
        .emoji-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 40px;
            animation: emojiFadeIn 0.5s ease-out;
        }

        @keyframes emojiFadeIn {
            from {
                opacity: 0;
                transform: scale(0.5);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .emoji-display {
            font-size: 120px;
            letter-spacing: 15px;
            text-align: center;
            filter: drop-shadow(0 5px 15px rgba(0, 0, 0, 0.3));
        }

        .emoji-image {
            max-width: 800px;
            max-height: 500px;
            object-fit: contain;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
        }

        /* ========== Á≠îÊ°àÂå∫Âüü ========== */
        .answer-area {
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 40px;
        }

        .answer-text {
            font-size: 52px;
            font-weight: bold;
            color: #FFD700;
            padding: 20px 60px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 20px;
            border: 3px solid #FFD700;
            opacity: 0;
            transform: scale(0.8);
            transition: all 0.4s ease;
        }

        .answer-text.show {
            opacity: 1;
            transform: scale(1);
        }

        /* ========== ÊéßÂà∂ÊåâÈíÆÂå∫Âüü ========== */
        .controls-area {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 40px;
        }

        .control-btn {
            padding: 18px 40px;
            font-size: 26px;
            font-weight: bold;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        .btn-show {
            background: linear-gradient(145deg, #2196F3, #1976D2);
            color: #FFF;
        }

        .btn-red {
            background: linear-gradient(145deg, #F44336, #D32F2F);
            color: #FFF;
        }

        .btn-blue {
            background: linear-gradient(145deg, #2196F3, #1976D2);
            color: #FFF;
        }

        .btn-next {
            background: linear-gradient(145deg, #FF9800, #F57C00);
            color: #FFF;
        }

        .btn-end {
            background: linear-gradient(145deg, #F44336, #D32F2F);
            color: #FFF;
        }

        .btn-home {
            background: linear-gradient(145deg, #8E0E00, #6D0C0C);
            color: #FFF;
            border: 2px solid #FFD700;
            text-decoration: none;
            display: inline-block;
        }

        .control-btn:hover:not(:disabled), .btn-home:hover {
            transform: scale(1.08);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
        }

        .control-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            transform: none;
        }

        /* ========== ËÆ°ÂàÜÊùø ========== */
        .scoreboard {
            display: flex;
            gap: 80px;
            justify-content: center;
            padding: 25px 60px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 20px;
            border: 2px solid rgba(255, 215, 0, 0.3);
        }

        .score-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .team-name {
            font-size: 32px;
            font-weight: bold;
        }

        .team-name.red {
            color: #FF6B6B;
        }

        .team-name.blue {
            color: #64B5F6;
        }

        .team-score {
            font-size: 48px;
            font-weight: bold;
            color: #FFD700;
            min-width: 80px;
            text-align: center;
        }

        /* ========== Âä†ÂàÜÂä®Áîª ========== */
        @keyframes scorePop {
            0% { transform: scale(1); }
            50% { transform: scale(1.3); color: #FFD700; }
            100% { transform: scale(1); }
        }

        .score-pop {
            animation: scorePop 0.4s ease-out;
        }

        /* ========== ÂìçÂ∫îÂºèÈÄÇÈÖç ========== */
        @media (max-width: 900px) {
            .emoji-display {
                font-size: 80px;
                letter-spacing: 8px;
            }
            .scoreboard {
                gap: 40px;
                padding: 20px 40px;
            }
            .team-name {
                font-size: 24px;
            }
            .team-score {
                font-size: 36px;
            }
        }

        @media (max-width: 600px) {
            .emoji-display {
                font-size: 60px;
                letter-spacing: 5px;
            }
            .answer-text {
                font-size: 36px;
                padding: 15px 30px;
            }
        }
    </style>
</head>
<body>
    <!-- È°∂ÈÉ®Áä∂ÊÄÅÊ†è -->
    <div class="header">
        <div class="game-name">ÁúãemojiÁåúÊàêËØ≠</div>
        <div class="question-info">Á¨¨ <span id="currentNum">1</span>/20 È¢ò</div>
    </div>

    <!-- Ê∏∏ÊàèÂå∫Âüü -->
    <div class="game-area">
        <!-- EmojiÊòæÁ§∫Âå∫Âüü -->
        <div class="emoji-container">
            <img id="emojiImage" class="emoji-image" src="" alt="EmojiÈ¢òÁõÆ" onerror="this.style.display='none'; document.getElementById('emojiDisplay').style.display='block';">
            <div class="emoji-display" id="emojiDisplay" style="display: none;"></div>
        </div>

        <!-- Á≠îÊ°àÂå∫Âüü -->
        <div class="answer-area">
            <div class="answer-text" id="answerText"></div>
        </div>

        <!-- ÊéßÂà∂ÊåâÈíÆ -->
        <div class="controls-area">
            <button class="control-btn btn-show" id="btnShow" onclick="showAnswer()">ÊòæÁ§∫Á≠îÊ°à</button>
            <button class="control-btn btn-red" id="btnRed" onclick="addRedScore()">Á∫¢Èòü+1ÂàÜ</button>
            <button class="control-btn btn-blue" id="btnBlue" onclick="addBlueScore()">ËìùÈòü+1ÂàÜ</button>
            <button class="control-btn btn-next" id="btnNext" onclick="nextQuestion()">‰∏ã‰∏ÄÈ¢ò</button>
            <button class="control-btn btn-end" onclick="endGame()">ÁªìÊùüÊ∏∏Êàè</button>
            <a href="index.html" class="control-btn btn-home">ËøîÂõûÈ¶ñÈ°µ</a>
        </div>

        <!-- ËÆ°ÂàÜÊùø -->
        <div class="scoreboard">
            <div class="score-item">
                <div class="team-name red">Á∫¢Èòü</div>
                <div class="team-score" id="redScore">0</div>
            </div>
            <div class="score-item">
                <div class="team-name blue">ËìùÈòü</div>
                <div class="team-score" id="blueScore">0</div>
            </div>
        </div>
    </div>

    <script>
        // ========== ÈÖçÁΩÆÂ∏∏Èáè ==========
        const EMOJI_PATH = 'images/game2/';  // emojiÂõæÁâáÂü∫Á°ÄË∑ØÂæÑ
        const TOTAL_QUESTIONS = 20;  // ÊÄªÈ¢òÊï∞

        // ========== È¢òÂ∫ìÊï∞ÊçÆ ==========
        const idioms = [
            {id: 1, image: "e1.jpg", emoji: "üåüüéãüÄÑüíñ", answer: "ÂøÉÊÉ≥‰∫ãÊàê"},
            {id: 2, image: "e2.jpg", emoji: "üßß‚≠êüî≠‚ú®", answer: "Á¶èÊòüÈ´òÁÖß"},
            {id: 3, image: "e3.jpg", emoji: "üßò‚Äç‚ôÇÔ∏èüí´üßö‚Äç‚ôÇÔ∏èüåü", answer: "Á•ûÈááÂ•ïÂ•ï"},
            {id: 4, image: "e4.jpg", emoji: "üö∂‚Äç‚ôÇÔ∏èüìàü™úüÜô", answer: "Ê≠•Ê≠•È´òÂçá"},
            {id: 5, image: "e5.jpg", emoji: "üòÑ‚¨ÜÔ∏èüëÄüåø", answer: "Âñú‰∏äÁúâÊ¢¢"},
            {id: 6, image: "e6.jpg", emoji: "üìöüå∏üö™üë®‚Äçüë©‚Äçüëß‚Äçüë¶", answer: "‰π¶È¶ôÈó®Á¨¨"},
            {id: 7, image: "e7.jpg", emoji: "üôàüëÇüë•üëÄ", answer: "Êé©‰∫∫ËÄ≥ÁõÆ"},
            {id: 8, image: "e8.jpg", emoji: "‚ù§Ô∏èüî¶üí¨ü§ê", answer: "ÂøÉÁÖß‰∏çÂÆ£"},
            {id: 9, image: "e9.jpg", emoji: "ü§ùüíëüí™‚õ∞Ô∏è", answer: "Êê∫ÊâãÂπ∂ËÇ©"},
            {id: 10, image: "e10.jpg", emoji: "üî®üî©üîäüéµ", answer: "‰∏ÄÈî§ÂÆöÈü≥"},
            {id: 11, image: "e11.jpg", emoji: "9Ô∏è‚É£9Ô∏è‚É£‚û°Ô∏è1Ô∏è‚É£", answer: "‰πù‰πùÂΩí‰∏Ä"},
            {id: 12, image: "e12.jpg", emoji: "‚òÅÔ∏èüëã‚òÄÔ∏èüå§Ô∏è", answer: "Êã®‰∫ëËßÅÊó•"},
            {id: 13, image: "e13.jpg", emoji: "üèáüò∞‚¨áÔ∏èüö´", answer: "È™ëËôéÈöæ‰∏ã"},
            {id: 14, image: "e14.jpg", emoji: "üëïüçöüë®‚Äçüë©‚Äçüëß‚Äçüë¶", answer: "Ë°£È£üÁà∂ÊØç"},
            {id: 15, image: "e15.jpg", emoji: "üê¥üê¥üêØüêØ", answer: "È©¨È©¨ËôéËôé"},
            {id: 16, image: "e16.jpg", emoji: "üèÉ‚Äç‚ôÇÔ∏èüí®üå∏üå∏üå∏", answer: "ÈÄÉ‰πãÂ§≠Â§≠"},
            {id: 17, image: "e17.jpg", emoji: "üåøüå≥üõ°Ô∏è‚öîÔ∏è", answer: "ËçâÊú®ÁöÜÂÖµ"},
            {id: 18, image: "e18.jpg", emoji: "üíßüå∏üéãüíØ", answer: "ÊµÅËä≥Áôæ‰∏ñ"},
            {id: 19, image: "e19.jpg", emoji: "üíßüöøüîíüíß", answer: "Êª¥Ê∞¥‰∏çÊºè"},
            {id: 20, image: "e20.jpg", emoji: "üßπüßä‚òÅÔ∏è‚ö™", answer: "Ê∏ÖÊ∏ÖÁôΩÁôΩ"},
            {id: 21, image: "e21.jpg", emoji: "ü™°üö´üí®ü™µ", answer: "Á∫π‰∏ù‰∏çÂä®"},
            {id: 22, image: "e22.jpg", emoji: "üî•üå≥üéÜüí•", answer: "ÁÅ´Ê†ëÈì∂Ëä±"},
            {id: 23, image: "e23.jpg", emoji: "3Ô∏è‚É£üè†üõñüåæ", answer: "‰∏âÈ°æËåÖÂ∫ê"},
            {id: 24, image: "e24.jpg", emoji: "ü¶óüí™üöó‚öîÔ∏è", answer: "Ëû≥ËáÇÂΩìËΩ¶"},
            {id: 25, image: "e25.jpg", emoji: "üü¢üçëüéãüê¥", answer: "ÈùíÊ¢ÖÁ´πÈ©¨"},
            {id: 26, image: "e26.jpg", emoji: "üîî‚õ∞Ô∏èüíéüå∫", answer: "ÈíüÁÅµÊØìÁßÄ"},
            {id: 27, image: "e27.jpg", emoji: "üèÆüîîüéäüéâ", answer: "Âº†ÁÅØÁªìÂΩ©"},
            {id: 28, image: "e28.jpg", emoji: "üî•üò∞‚è∞üö®", answer: "ÁáÉÁúâ‰πãÊÄ•"},
            {id: 29, image: "e29.jpg", emoji: "üíÄ‚û°Ô∏èüîÑüíö", answer: "Ê≠ªËÄåÂ§çÁîü"},
            {id: 30, image: "e30.jpg", emoji: "üò¥üçΩÔ∏èüò∞üò£", answer: "ÂØùÈ£üÈöæÂÆâ"},
            {id: 31, image: "e31.jpg", emoji: "üßß‚≠êüî≠‚ú®", answer: "ÂêâÊòüÈ´òÁÖß"},
            {id: 32, image: "e32.jpg", emoji: "üèÆüîîüéäüéâ", answer: "Âº†ÁÅØÁªìÂΩ©"},
            {id: 33, image: "e33.jpg", emoji: "ü™µüå≥‚û°Ô∏èüå±", answer: "ÊûØÊú®ÈÄ¢Êò•"},
            {id: 34, image: "e34.jpg", emoji: "üòçüëÅÔ∏èüå∫üå∫", answer: "ËµèÂøÉÊÇ¶ÁõÆ"},
            {id: 35, image: "e35.jpg", emoji: "üêâ‚öîÔ∏èüêÖ‚öîÔ∏è", answer: "Èæô‰∫âËôéÊñó"},
            {id: 36, image: "e36.jpg", emoji: "‚ù§Ô∏è‚ù§Ô∏èüìç", answer: "ÂøÉÂøÉÁõ∏Âç∞"},
            {id: 37, image: "e37.jpg", emoji: "ü§≤üÜìüôã‚Äç‚ôÇÔ∏èüíö", answer: "ËàçÂ∑±Êïë‰∫∫"},
            {id: 38, image: "e38.jpg", emoji: "üë•üéØüèπüëç", answer: "‰ºóÊúõÊâÄÂΩí"},
            {id: 39, image: "e39.jpg", emoji: "üá®üá≥üå∑üå∏üíé", answer: "ÂõΩËâ≤Â§©È¶ô"},
            {id: 40, image: "e40.jpg", emoji: "‚õ∞Ô∏èüî™üî•üåä", answer: "ÂàÄÂ±±ÁÅ´Êµ∑"},
            {id: 41, image: "e41.jpg", emoji: "üèÉ‚Äç‚ôÇÔ∏èüîÑüè†üåæ", answer: "ËÉå‰∫ïÁ¶ª‰π°"},
            {id: 42, image: "e42.jpg", emoji: "üèõÔ∏èüèõÔ∏èüëäüëä", answer: "Â†ÇÂ†ÇÊ≠£Ê≠£"},
            {id: 43, image: "e43.jpg", emoji: "‚¨ÖÔ∏èüß†üí≠‚û°Ô∏è", answer: "Â∑¶ÊÄùÂè≥ÊÉ≥"},
            {id: 44, image: "e44.jpg", emoji: "üåæüåºüí®üå∏", answer: "ÈáëÊ°ÇÈ£òÈ¶ô"},
            {id: 45, image: "e45.jpg", emoji: "üê¶üó£Ô∏èüå∏üå∏", answer: "È∏üËØ≠Ëä±È¶ô"},
            {id: 46, image: "e46.jpg", emoji: "1Ô∏è‚É£‚úçÔ∏èüí∞üí∞", answer: "‰∏ÄÂ≠óÂçÉÈáë"},
            {id: 47, image: "e47.jpg", emoji: "üêïüò∞ü¶òüß±", answer: "ÁãóÊÄ•Ë∑≥Â¢ô"},
            {id: 48, image: "e48.jpg", emoji: "üëÄ‚¨ÖÔ∏èüò≥üëÄ‚û°Ô∏è", answer: "ÁûªÂâçÈ°æÂêé"},
            {id: 49, image: "e49.jpg", emoji: "üåÖ‚õ∞Ô∏èüìâüåá", answer: "Êó•ËñÑË•øÂ±±"},
            {id: 50, image: "e50.jpg", emoji: "üíÄüö´üòåüí∞", answer: "Ê≠ª‰∏çË∂≥ÊÉú"},
            {id: 51, image: "e51.jpg", emoji: "üñêÔ∏è‚òùÔ∏è‚ù§Ô∏èüîó", answer: "ÂçÅÊåáËøûÂøÉ"},
            {id: 52, image: "e52.jpg", emoji: "üêé‚û°Ô∏èüèÜ‚úÖ", answer: "È©¨Âà∞ÊàêÂäü"},
            {id: 53, image: "e53.jpg", emoji: "üëÄüôèüêâ‚úàÔ∏è", answer: "ÊúõÂ≠êÊàêÈæô"},
            {id: 54, image: "e54.jpg", emoji: "üá®üá≥üéñÔ∏èüö´üë•", answer: "ÂõΩÂ£´Êó†Âèå"},
            {id: 55, image: "e55.jpg", emoji: "üò±üåä‚ö°üåÄ", answer: "ÊÉäÊ∂õÂ∑®Êµ™"},
            {id: 56, image: "e56.jpg", emoji: "3Ô∏è‚É£üë•üêÖüêÖ", answer: "‰∏â‰∫∫ÊàêËôé"},
            {id: 57, image: "e57.jpg", emoji: "üíéüî®üö™üîì", answer: "ÈáëÁü≥ÂèØÂºÄ"},
            {id: 58, image: "e58.jpg", emoji: "2Ô∏è‚É£üßí‚ùìüßí", answer: "‰∏§Â∞èÊó†Áåú"},
            {id: 59, image: "e59.jpg", emoji: "üëªüî®üé≠üíé", answer: "È¨ºÊñßÁ•ûÂ∑•"},
            {id: 60, image: "e60.jpg", emoji: "üèõÔ∏èüßç‚Äç‚ôÄÔ∏èüå∏üå∏", answer: "‰∫≠‰∫≠ÁéâÁ´ã"},
            {id: 61, image: "e61.jpg", emoji: "üêØüß†üêØüß†", answer: "ËôéÂ§¥ËôéËÑë"},
            {id: 62, image: "e62.jpg", emoji: "üñäÔ∏èüèÉ‚Äç‚ôÇÔ∏èüêâüêç", answer: "Á¨îËµ∞ÈæôËõá"},
            {id: 63, image: "e63.jpg", emoji: "üé®ü´ìüçûüòã", answer: "ÁîªÈ•ºÂÖÖÈ••"},
            {id: 64, image: "e64.jpg", emoji: "üêòüòÑüé∫üé∫", answer: "ÂæóÊÑèÊ¥ãÊ¥ã"},
            {id: 65, image: "e65.jpg", emoji: "üå∏üå∏üåçüåç", answer: "Ëä±Ëä±‰∏ñÁïå"},
            {id: 66, image: "e66.jpg", emoji: "‚òÄÔ∏èüî•üî•üî•", answer: "ÁÉàÊó•ÁÇéÁÇé"},
            {id: 67, image: "e67.jpg", emoji: "‚ö°üå©Ô∏èüîäüåßÔ∏è", answer: "ÁîµÈó™Èõ∑È∏£"},
            {id: 68, image: "e68.jpg", emoji: "üòé‚òÄÔ∏èüî•üêî", answer: "È™ÑÈò≥‰ººÁÅ´"},
            {id: 69, image: "e69.jpg", emoji: "üëÄüí¶üåäüëÅÔ∏è", answer: "ÊúõÁ©øÁßãÊ∞¥"},
            {id: 70, image: "e70.jpg", emoji: "üëπüë∫üëªü§°", answer: "Â¶ñÈ≠îÈ¨ºÊÄ™"},
            {id: 71, image: "e71.jpg", emoji: "üêâüêâüö´üëë", answer: "Áæ§ÈæôÊó†È¶ñ"},
            {id: 72, image: "e72.jpg", emoji: "üê∫üî•üÜô4Ô∏è‚É£", answer: "ÁãºÁÉüÂõõËµ∑"},
            {id: 73, image: "e73.jpg", emoji: "üçà‚¨ÜÔ∏èüçë‚¨áÔ∏è", answer: "ÊµÆÁìúÊ≤âÊùé"},
            {id: 74, image: "e74.jpg", emoji: "‚úã5Ô∏è‚É£‚û°Ô∏è1Ô∏è‚É£0Ô∏è‚É£", answer: "‰∏Ä‰∫î‰∏ÄÂçÅ"},
            {id: 75, image: "e75.jpg", emoji: "üö´üí∞üíéüíé", answer: "Êó†‰ª∑‰πãÂÆù"},
            {id: 76, image: "e76.jpg", emoji: "üëÄ‚û°Ô∏è‚òÅÔ∏èüí®", answer: "ËøáÁúº‰∫ëÁÉü"},
            {id: 77, image: "e77.jpg", emoji: "üòÑüåøüåøüåÖ", answer: "Ê¨£Ê¨£ÂêëËç£"},
            {id: 78, image: "e78.jpg", emoji: "üìÖ‚ûïüåô‚ûï", answer: "Êó•ÁßØÊúàÁ¥Ø"},
            {id: 79, image: "e79.jpg", emoji: "üëÄüîé‚û°Ô∏è1Ô∏è‚É£üêÜ", answer: "ÂèØËßÅ‰∏ÄÊñë"},
            {id: 80, image: "e80.jpg", emoji: "1Ô∏è‚É£0Ô∏è‚É£0Ô∏è‚É£0Ô∏è‚É£üéã", answer: "ÂçÉÁßã‰∏á‰ª£"},
            {id: 81, image: "e81.jpg", emoji: "üì©üòé‚úÖü¶ñ", answer: "‰ø°‰ª•‰∏∫Áúü"},
            {id: 82, image: "e82.jpg", emoji: "üß°‚≠ïüß°‚≠ïüß°", answer: "ÂÖ®ÂøÉÂÖ®ÊÑè"},
            {id: 83, image: "e83.jpg", emoji: "üó£Ô∏è‚ù§Ô∏èüìèüìê", answer: "ËØ≠ÈáçÂøÉÈïø"},
            {id: 84, image: "e84.jpg", emoji: "üö©üèÉ‚Äç‚ôÇÔ∏èüè∞üîô", answer: "Áè≠Â∏àÂõûÊúù"},
            {id: 85, image: "e85.jpg", emoji: "‚úã‚úãüå´Ô∏èüå´Ô∏è", answer: "‰∏§ÊâãÁ©∫Á©∫"},
            {id: 86, image: "e86.jpg", emoji: "üìöüéìüö´üéØ", answer: "ÂçöËÄå‰∏çÁ≤æ"},
            {id: 87, image: "e87.jpg", emoji: "‚ù§Ô∏èüö´üôåüëê", answer: "Áà±‰∏çÈáäÊâã"},
            {id: 88, image: "e88.jpg", emoji: "‚úçÔ∏è‚úä‚úçÔ∏èü¶∂", answer: "Âä®ÊâãÂä®ËÑö"},
            {id: 89, image: "e89.jpg", emoji: "üîÑüîÑüîÑüîÑ", answer: "ÁîüÁîü‰∏çÊÅØ"},
            {id: 90, image: "e90.jpg", emoji: "üìè‚è∫Ô∏èü§îüÜö", answer: "ËØ∏Â¶ÇÊ≠§ÊØî"},
            {id: 91, image: "e91.jpg", emoji: "üé®üêâüëÅÔ∏è‚ú®", answer: "ÁîªÈæôÁÇπÁùõ"},
            {id: 92, image: "e92.jpg", emoji: "üå∏‚úÖüåï‚úÖ", answer: "Ëä±Â•ΩÊúàÂúÜ"},
            {id: 93, image: "e93.jpg", emoji: "üõ§Ô∏èüå∏üå∫üéÄ", answer: "ÂâçÁ®ã‰ººÈî¶"},
            {id: 94, image: "e94.jpg", emoji: "üëÄ‚ù§Ô∏èüîîüíï", answer: "‰∏ÄËßÅÈíüÊÉÖ"},
            {id: 95, image: "e95.jpg", emoji: "üòäüå∏üå∏üå∏", answer: "‰∫∫Èù¢Ê°ÉËä±"},
            {id: 96, image: "e96.jpg", emoji: "1Ô∏è‚É£0Ô∏è‚É£0Ô∏è‚É£üíØüéØ", answer: "ÁôæÂèëÁôæ‰∏≠"},
            {id: 97, image: "e97.jpg", emoji: "üå∏üåô‚¨áÔ∏èüåô", answer: "Ëä±ÂâçÊúà‰∏ã"},
            {id: 98, image: "e98.jpg", emoji: "üëÄüò≥üí¨‚ù§Ô∏è", answer: "ÁúâÁõÆ‰º†ÊÉÖ"},
            {id: 99, image: "e99.jpg", emoji: "üêî‚úàÔ∏èü•öüí•", answer: "È∏°È£ûËõãÊâì"},
            {id: 100, image: "e100.jpg", emoji: "üé®üêç‚ûïü¶∂", answer: "ÁîªËõáÊ∑ªË∂≥"}
        ];

        // ========== Ê∏∏ÊàèÁä∂ÊÄÅÂèòÈáè ==========
        let currentIndex = 0;  // ÂΩìÂâçÈ¢òÂè∑Á¥¢Âºï
        let redScore = 0;  // Á∫¢ÈòüÂæóÂàÜ
        let blueScore = 0;  // ËìùÈòüÂæóÂàÜ
        let shuffledQuestions = [];  // Êâì‰π±ÂêéÁöÑÈ¢òÁõÆÈ°∫Â∫è
        let answerShown = false;  // Á≠îÊ°àÊòØÂê¶Â∑≤ÊòæÁ§∫

        // ========== ÂàùÂßãÂåñÊ∏∏Êàè ==========
        function initGame() {
            // Ê£ÄÊü•ÊòØÂê¶Â∑≤ÊúâËøõË°å‰∏≠ÁöÑÊ∏∏Êàè
            const savedIndex = localStorage.getItem('game2_currentIndex');
            const savedRedScore = localStorage.getItem('game2_redScore');
            const savedBlueScore = localStorage.getItem('game2_blueScore');
            const savedShuffled = localStorage.getItem('game2_shuffled');

            if (savedIndex !== null) {
                // ÊÅ¢Â§çÊ∏∏ÊàèÁä∂ÊÄÅ
                currentIndex = parseInt(savedIndex);
                redScore = parseInt(savedRedScore);
                blueScore = parseInt(savedBlueScore);
                shuffledQuestions = JSON.parse(savedShuffled);
            } else {
                // Êñ∞Ê∏∏ÊàèÔºö‰ªéÈ¢òÂ∫ì‰∏≠ÈöèÊú∫ÊäΩÂèñ20ÈÅìÈ¢òÂπ∂Êâì‰π±È°∫Â∫è
                const allIndices = [...Array(idioms.length).keys()];
                shuffledQuestions = shuffleArray(allIndices).slice(0, TOTAL_QUESTIONS);
                saveGameState();
            }

            loadQuestion();
        }

        // ========== È¢òÁõÆÊï∞ÁªÑÊâì‰π±ÁÆóÊ≥ï ==========
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        // ========== Âä†ËΩΩÂΩìÂâçÈ¢òÁõÆ ==========
        function loadQuestion() {
            if (currentIndex >= shuffledQuestions.length) {
                // Ê∏∏ÊàèÁªìÊùüÔºåË∑≥ËΩ¨Âà∞ÁªìÁÆóÈ°µ
                endGame();
                return;
            }

            const questionIndex = shuffledQuestions[currentIndex];
            const idiom = idioms[questionIndex];

            // Êõ¥Êñ∞emojiÊòæÁ§∫Ôºà‰ºòÂÖàÊòæÁ§∫ÂõæÁâáÔºåÂ§±Ë¥•ÂàôÊòæÁ§∫ÊñáÂ≠óemojiÔºâ
            const emojiImage = document.getElementById('emojiImage');
            const emojiDisplay = document.getElementById('emojiDisplay');

            // Ëß¶ÂèëÊ∑°ÂÖ•Âä®Áîª
            const emojiContainer = document.querySelector('.emoji-container');
            emojiContainer.style.animation = 'none';
            setTimeout(() => {
                emojiContainer.style.animation = 'emojiFadeIn 0.5s ease-out';
            }, 10);

            // ËÆæÁΩÆÂõæÁâáË∑ØÂæÑ
            emojiImage.src = EMOJI_PATH + idiom.image;
            emojiImage.style.display = 'block';
            emojiDisplay.style.display = 'none';

            // ÂõæÁâáÂä†ËΩΩÂ§±Ë¥•Êó∂ÊòæÁ§∫emojiÊñáÂ≠ó
            emojiImage.onerror = function() {
                this.style.display = 'none';
                emojiDisplay.style.display = 'block';
                emojiDisplay.textContent = idiom.emoji;
            };

            // Êõ¥Êñ∞È¢òÂè∑
            document.getElementById('currentNum').textContent = currentIndex + 1;

            // Êõ¥Êñ∞ÂàÜÊï∞ÊòæÁ§∫
            updateScoreDisplay();

            // ÈáçÁΩÆÁ≠îÊ°àÊòæÁ§∫
            answerShown = false;
            document.getElementById('answerText').textContent = idiom.answer;
            document.getElementById('answerText').classList.remove('show');
            document.getElementById('btnShow').disabled = false;
        }

        // ========== Êõ¥Êñ∞ÂàÜÊï∞ÊòæÁ§∫ ==========
        function updateScoreDisplay() {
            document.getElementById('redScore').textContent = redScore;
            document.getElementById('blueScore').textContent = blueScore;
        }

        // ========== ÊòæÁ§∫Á≠îÊ°à ==========
        function showAnswer() {
            if (answerShown) return;
            answerShown = true;
            document.getElementById('answerText').classList.add('show');
            document.getElementById('btnShow').disabled = true;
        }

        // ========== Á∫¢ÈòüÂä†ÂàÜ ==========
        function addRedScore() {
            if (!answerShown) {
                showAnswer();
            }
            redScore++;
            saveGameState();

            // Âä†ÂàÜÂä®Áîª
            const scoreEl = document.getElementById('redScore');
            scoreEl.classList.add('score-pop');
            setTimeout(() => scoreEl.classList.remove('score-pop'), 400);

            // Âª∂ËøüÂêéËøõÂÖ•‰∏ã‰∏ÄÈ¢ò
            setTimeout(() => {
                goToNextQuestion();
            }, 1500);
        }

        // ========== ËìùÈòüÂä†ÂàÜ ==========
        function addBlueScore() {
            if (!answerShown) {
                showAnswer();
            }
            blueScore++;
            saveGameState();

            // Âä†ÂàÜÂä®Áîª
            const scoreEl = document.getElementById('blueScore');
            scoreEl.classList.add('score-pop');
            setTimeout(() => scoreEl.classList.remove('score-pop'), 400);

            // Âª∂ËøüÂêéËøõÂÖ•‰∏ã‰∏ÄÈ¢ò
            setTimeout(() => {
                goToNextQuestion();
            }, 1500);
        }

        // ========== ‰∏ã‰∏ÄÈ¢òÔºà‰∏çÂä†ÂàÜÔºâ ==========
        function nextQuestion() {
            goToNextQuestion();
        }

        // ========== Ë∑≥ËΩ¨‰∏ã‰∏ÄÈ¢ò ==========
        function goToNextQuestion() {
            currentIndex++;
            saveGameState();
            loadQuestion();
        }

        // ========== ‰øùÂ≠òÊ∏∏ÊàèÁä∂ÊÄÅÂà∞localStorage ==========
        function saveGameState() {
            localStorage.setItem('game2_currentIndex', currentIndex);
            localStorage.setItem('game2_redScore', redScore);
            localStorage.setItem('game2_blueScore', blueScore);
            localStorage.setItem('game2_shuffled', JSON.stringify(shuffledQuestions));
        }

        // ========== Ê∏∏ÊàèÁªìÊùü ==========
        function endGame() {
            // ‰øùÂ≠òÊúÄÁªàÂàÜÊï∞
            localStorage.setItem('game2_finalRedScore', redScore);
            localStorage.setItem('game2_finalBlueScore', blueScore);
            // Ë∑≥ËΩ¨Âà∞ÁªìÁÆóÈ°µ
            window.location.href = 'game2-result.html';
        }

        // ========== È°µÈù¢Âä†ËΩΩÂÆåÊàêÂêéÂàùÂßãÂåñ ==========
        document.addEventListener('DOMContentLoaded', initGame);
    </script>

    <!-- Èü≥‰πêÊéßÂà∂Âô® -->
    <audio id="bgMusic" loop preload="auto">
        <source src="./music/background.mp3" type="audio/mpeg">
    </audio>

    <div class="music-controller" id="musicController">
        <div class="music-icon" id="musicIcon">üéµ</div>
    </div>

    <style>
        .music-controller {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.6);
            border: 2px solid rgba(255, 215, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 9999;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }
        .music-controller:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(255, 215, 0, 0.5);
            border-color: rgba(255, 215, 0, 0.9);
        }
        .music-icon {
            font-size: 30px;
            color: #FFD700;
            transition: all 0.3s ease;
        }
        .music-controller.playing .music-icon {
            animation: musicRotate 3s linear infinite;
        }
        @keyframes musicRotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .music-controller.playing::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 2px solid rgba(255, 215, 0, 0.4);
            animation: musicPulse 1.5s ease-out infinite;
        }
        @keyframes musicPulse {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(1.5); opacity: 0; }
        }
        @media (max-width: 768px) {
            .music-controller {
                width: 50px;
                height: 50px;
                bottom: 15px;
                right: 15px;
            }
            .music-icon {
                font-size: 24px;
            }
        }
    </style>

    <script>
        const MUSIC_CONFIG = { volume: 0.5, autoPlay: true, storageKey: 'bgMusicPlaying' };
        class MusicController {
            constructor() {
                this.audio = document.getElementById('bgMusic');
                this.controller = document.getElementById('musicController');
                this.icon = document.getElementById('musicIcon');
                this.isPlaying = false;
                this.userInteracted = false;
                this.init();
            }
            init() {
                this.audio.volume = MUSIC_CONFIG.volume;
                const savedState = localStorage.getItem(MUSIC_CONFIG.storageKey);
                if (savedState === 'true') {
                    this.isPlaying = true;
                    this.updateUI();
                }
                this.controller.addEventListener('click', () => this.toggle());
                document.addEventListener('click', () => this.handleFirstInteraction(), { once: true });
                document.addEventListener('keydown', () => this.handleFirstInteraction(), { once: true });
                this.audio.addEventListener('ended', () => {
                    this.audio.currentTime = 0;
                    this.audio.play();
                });
            }
            handleFirstInteraction() {
                if (this.userInteracted) return;
                this.userInteracted = true;
                if (this.isPlaying) this.play();
            }
            toggle() {
                this.userInteracted = true;
                if (this.isPlaying) this.pause();
                else this.play();
            }
            play() {
                const playPromise = this.audio.play();
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        this.isPlaying = true;
                        this.saveState();
                        this.updateUI();
                    }).catch(() => {
                        this.isPlaying = false;
                        this.updateUI();
                    });
                }
            }
            pause() {
                this.audio.pause();
                this.isPlaying = false;
                this.saveState();
                this.updateUI();
            }
            saveState() {
                localStorage.setItem(MUSIC_CONFIG.storageKey, this.isPlaying.toString());
            }
            updateUI() {
                if (this.isPlaying) {
                    this.controller.classList.add('playing');
                    this.icon.textContent = 'üéµ';
                } else {
                    this.controller.classList.remove('playing');
                    this.icon.textContent = 'üîá';
                }
            }
        }
        document.addEventListener('DOMContentLoaded', function() {
            if (!window.musicControllerInstance) {
                window.musicControllerInstance = new MusicController();
            }
        });
    </script>
</body>
</html>
